# 31.删库不跑路


## 误删行

Flashback

是修改binlog的内容，拿回原库重放

### 预防方式

* 把sql_safe_updates参数设置为on。这样一来，如果我们忘记在delete或者update语句中写where条件，或者where条件里面没有包含索引字段的话，这条语句的执行就会报错。
* 码上线前，必须经过SQL审计

## 误删库/表

### 全量备份 + 实时备份binlog

#### 加速方法

用上主从的并行复制

#### 延迟复制备库

主备间配置较大延迟，这样主库误操作删除，备库还有数据。

### 预防误删库/表的方法

账号分离

制定操作规范

## rm删除数据

选出新的主库，继续工作
