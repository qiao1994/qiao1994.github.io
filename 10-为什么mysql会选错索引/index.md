# 10.为什么MySQL会选错索引


## MySQL是如何选择索引的

根据扫描行数、是否使用临时表、是否排序等因素综合判断

## 如何得到扫描行数

MySQL在真正开始执行语句之前，并不能精确地知道满足这个条件的记录有多少条，而只能根据统计信息来估算记录数。

这个统计信息就是索引的“区分度”。显然，一个索引上不同的值越多，这个索引的区分度就越好。而一个索引上不同的值的个数，我们称之为“基数”（cardinality）。也就是说，这个基数越大，索引的区分度越好。

### MySQL是怎样得到索引的基数的呢？

采样统计

> MySQL的bug会导致扫描行数统计不准确

## 异常处理方式

* 使用force index
* 修改sql语句，引导MySQL使用我们期望的索引，比如增加order by中的列
* 新建一个更合适的索引，或者删掉无用的索引
