# 数据结构:红黑树

# 定义
## 意义
红黑树是一种**近似**平衡的二叉查找树
树各种操作的时间复杂度基本都和树的高度成正比，所以我们期望我们的树能尽量平衡，这样才能让复杂度不退化，保持在`O(logn)`的级别。
一种完全平衡的二叉查找树实现是AVL树，但是树是动态数据结构，要在频繁的操作中维持树的完全平衡代价很大，所以红黑树应运而生。它满足了维持平衡代价低、且性能不至于退化严重两个需求。

## 要求
* 根节点是黑色的
* 每个叶子节点都是黑色的空节点
* 任何相邻的节点都不能同时为红色(这个相邻是指父子相邻)
* 每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点

![红黑树的长相](https://qiao1994.github.io/images/pasted-9.png)

# 红黑树如何保证"近似"平衡(高度不至于太高)
* 如果将红色节点去掉，那只包含黑色节点的红黑树的高度是多少
![只包含黑色节点的红黑树](https://qiao1994.github.io/images/pasted-10.png)
如果从四叉树中取出某些节点，放到叶子节点位置，四叉树就变成了完全二叉树
由要求`每个节点，从该节点到达其可达叶子节点的所有路径，都包含相同数目的黑色节点`可以知道，如果从四叉树中取出某些节点，放到叶节点的位置，四叉树就变成了完全二叉树。所以仅包含黑色节点的四叉树的高度，比包含相同节点数目的完全二叉树的高度还要小，即小于`logn`。

* 如果把红色加回去，树的高度是多少
由要求`任何相邻的节点都不能同时为红色`可知，在竖直方向上有一个红色节点至少要有一个黑色节点，所以红色节点增加的高度不会比仅有黑色的四叉树高度更高，即小于`2logn`。

# 实现
红黑树的实现主要是保持树的平衡过程，主要有旋转和变色两种操作。
实现过程基本是针对不同的情况之下不同的流程，情况较多很复杂。所以呢，就不写了(因为我也不会
