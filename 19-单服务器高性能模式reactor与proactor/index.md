# 19.单服务器高性能模式：Reactor与Proactor

> 本节并不太理解，暂放;后续如果有机会学习nginx原理时再详细了解

# Reactor
## 资源复用
PPC和TPC和核心问题是每个连接都要创建进程/线程，连接结束后就销毁了，这样很浪费资源。为了解决这个问题，一个自然而然的想法就是资源复用，创建一个进程池，一个进程可以处理多个连接。

## 如何高效处理多个连接
* 常规的read->业务处理->write ：进程阻塞在read上，无法处理多个请求
* read非常阻塞，进程轮询连接：轮询不优雅，消耗cpu
* **I/O多路复用**，只有当连接上有数据的时候进程才去处理

## I/O多路复用两个关键点
* 当多条连接共用一个阻塞对象后，进程只需要在一个阻塞对象上等待，无须再轮询所有连接
* 当某条连接有新的数据可以处理时，操作系统会通知进程，进程从阻塞状态返回，开始进行业务处理

## Reactor/Dispatcher模式
* **Reactor**监听和分配事件
* **处理资源池**负责处理事件

## 复杂度可能的来源
* Reactor的数量可变：单个、多个
* 资源池的数量可变：单进程、多进程
上述情况排列组合后会有四中选择，但是由多Reactor单进程很鸡肋，所以只有如下三种典型方案

## Reactor的可选方案
* 单Reactor 单进程/线程
* 单Reactor 多线程
* 多Reactor 多进程/线程

# Proactor
异步I/O

