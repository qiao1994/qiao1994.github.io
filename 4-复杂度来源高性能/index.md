# 4.复杂度来源：高性能

# 单机复杂度
## 进程和线程的前世今生
* 手工操作：系统大多数时间都在等待人的输入
* 批处理：计算机一次只能执行一个任务，如果某个任务需要从I/O读取大量数据，在这个过程中，CPU是空闲的
* 多进程(分时利用CPU)：单个进程内部只能串行处理，且进程间通信比较复杂
* 多进程多线程
    * 线程是计算机是计算机调度的最小单位
    * 进程是计算机资源的最小分配单元
    
## 架构设计的复杂度
考虑多进程、多线程、进程间通信、多线程并发等技术点，在架构设计时需要根据业务选型

# 集群的复杂度
## 任务分配
* 需要增加一个任务分配器
* 分配器和业务服务器之间需要连接和交互(连接方式、异常处理等)
* 分配算法(轮询、按权重、按负载)

## 任务分解
任务越复杂，单台集群处理器性能越低，只通过增加集群来扩展性能，收益会越来越低。
把业务横向拆解成多个子业务可以解决此问题，主要因为
* 简单的系统容易做到高性能
* 可以针对单个任务进行扩展
